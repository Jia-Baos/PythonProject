# 使用说明

## 从清华源安装库
```
// 从清华源安装库
-i https://pypi.tuna.tsinghua.edu.cn/simple
```

## 有 pytorch_lighting 要求时，优先安装 pytorch_lighting

## No module named 'torch._six'

Traceback (most recent call last):
  File "demo/demo.py", line 9, in <module>
    from nanodet.data.collate import naive_collate
  File "/home/jia-baos/Project-Python/nanodet/nanodet/data/collate.py", line 19, in <module>
    from torch._six import string_classes
ModuleNotFoundError: No module named 'torch._six'

[参考链接](https://blog.csdn.net/BetrayFree/article/details/137692591)

## No module named 'pytorch_lightning'

Traceback (most recent call last):
  File "demo/demo.py", line 11, in <module>
    from nanodet.model.arch import build_model
  File "/home/jia-baos/Project-Python/nanodet/nanodet/model/arch/__init__.py", line 18, in <module>
    from .nanodet_plus import NanoDetPlus
  File "/home/jia-baos/Project-Python/nanodet/nanodet/model/arch/nanodet_plus.py", line 19, in <module>
    from ..head import build_head
  File "/home/jia-baos/Project-Python/nanodet/nanodet/model/head/__init__.py", line 3, in <module>
    from .gfl_head import GFLHead
  File "/home/jia-baos/Project-Python/nanodet/nanodet/model/head/gfl_head.py", line 10, in <module>
    from nanodet.util import (
  File "/home/jia-baos/Project-Python/nanodet/nanodet/util/__init__.py", line 2, in <module>
    from .check_point import (
  File "/home/jia-baos/Project-Python/nanodet/nanodet/util/check_point.py", line 18, in <module>
    import pytorch_lightning as pl
ModuleNotFoundError: No module named 'pytorch_lightning'

[参考链接](https://lightning.ai/docs/pytorch/latest/versioning.html#compatibility-matrix)

## 对于 onnxsim 无法通过 conda 和 pip 安装的解决方案

```python3.12 -m pip install onnxsim -i https://pypi.tuna.tsinghua.edu.cn/simple```

## openvino安装

直接按官网安装即可，首先是 OpenVINO Runtime，其次是 OpenVINO Development Tools。

```source /opt/intel/openvino_2022/setupvars.sh```

For C++ developers, if you have installed OpenVINO Runtime via APT, YUM, or the archive file, and then installed OpenVINO Development Tools via PyPI, you may run into issues. To resolve that, install the components in requirements.txt by using the following command:

```pip install -r <INSTALL_DIR>/tools/requirements.txt```

For APT and YUM users, replace the INSTALL_DIR with /usr/share/openvino.

## onnx 转 ir

```
mo --input_model ./nanodet.onnx --mean_values [103.53,116.28,123.675] --scale_values [57.375,57.12,58.395] --output output --data_type FP32 --output_dir ./
```

[参考连接](https://docs.openvino.ai/2022.3/openvino_docs_install_guides_installing_openvino_from_archive_linux.html)

[参考连接](https://docs.openvino.ai/2022.3/openvino_docs_get_started_guide_troubleshooting_issues.html#doxid-openvino-docs-get-started-guide-troubleshooting-issues)

[参考连接](https://blog.csdn.net/qq_58355216/article/details/141418326?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1-141418326-blog-126988288.235^v43^pc_blog_bottom_relevance_base2&spm=1001.2101.3001.4242.2&utm_relevant_index=4)

[参考连接](https://blog.csdn.net/qq_40280673/article/details/137142764)

## onnx 转 ncnn

```
/usr/local/ncnn/bin/onnx2ncnn ./nanodet.onnx ./nanodet-ncnn.param ./nanodet-ncnn.bin

```

[onnx转ncnn](https://blog.csdn.net/qq_40280673/article/details/137142764)

[ncnn量化int8](https://www.cnblogs.com/wanggangtao/p/11352948.html)
